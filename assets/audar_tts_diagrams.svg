<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1100" style="max-width:100%;height:auto;">
  <defs>
    <filter id="s" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#000" flood-opacity="0.08"/>
    </filter>
  </defs>
  
  <rect width="900" height="1100" fill="#fafafa"/>
  
  <!-- ===== ARCHITECTURE DIAGRAM ===== -->
  <text x="450" y="36" text-anchor="middle" font-family="system-ui,sans-serif" font-size="22" font-weight="600" fill="#111">Audar-TTS Architecture</text>
  <text x="450" y="56" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" fill="#666">Neural Codec LM · Zero-Shot Voice Cloning · EN/AR Bilingual</text>
  
  <!-- Row 1: Inputs -->
  <g transform="translate(40,75)">
    <rect width="260" height="70" rx="8" fill="#fff" filter="url(#s)"/>
    <rect width="260" height="24" rx="8" fill="#22c55e"/>
    <rect y="16" width="260" height="8" fill="#22c55e"/>
    <text x="12" y="16" font-family="system-ui" font-size="11" font-weight="600" fill="#fff">REFERENCE AUDIO</text>
    <text x="12" y="42" font-family="system-ui" font-size="11" fill="#333">3-10s WAV · 16kHz+</text>
    <text x="12" y="58" font-family="system-ui" font-size="10" fill="#888">Speaker voice sample</text>
  </g>
  
  <g transform="translate(320,75)">
    <rect width="260" height="70" rx="8" fill="#fff" filter="url(#s)"/>
    <rect width="260" height="24" rx="8" fill="#3b82f6"/>
    <rect y="16" width="260" height="8" fill="#3b82f6"/>
    <text x="12" y="16" font-family="system-ui" font-size="11" font-weight="600" fill="#fff">REFERENCE TEXT</text>
    <text x="12" y="42" font-family="system-ui" font-size="11" fill="#333">Audio transcript (optional)</text>
    <text x="12" y="58" font-family="monospace" font-size="10" fill="#666">"مرحبا، اسمي آيڤي"</text>
  </g>
  
  <g transform="translate(600,75)">
    <rect width="260" height="70" rx="8" fill="#fff" filter="url(#s)"/>
    <rect width="260" height="24" rx="8" fill="#f59e0b"/>
    <rect y="16" width="260" height="8" fill="#f59e0b"/>
    <text x="12" y="16" font-family="system-ui" font-size="11" font-weight="600" fill="#fff">TARGET TEXT</text>
    <text x="12" y="42" font-family="system-ui" font-size="11" fill="#333">Text to synthesize</text>
    <text x="12" y="58" font-family="monospace" font-size="10" fill="#666">"Welcome مرحبا to Audar"</text>
  </g>
  
  <!-- Arrows -->
  <path d="M170 145 L170 165 M450 145 L450 165 M730 145 L730 165" stroke="#ccc" stroke-width="1.5"/>
  <path d="M170 165 L170 175 L450 175 L450 185 M730 165 L730 175 L450 175" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,182 450,190 454,182" fill="#ccc"/>
  
  <!-- Row 2: Processing -->
  <g transform="translate(40,200)">
    <rect width="400" height="55" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="16" y="22" font-family="system-ui" font-size="12" font-weight="600" fill="#333">Codec Encoder</text>
    <text x="16" y="40" font-family="system-ui" font-size="10" fill="#888">DistillNeuCodec @ 50Hz → codes[0-8191]</text>
  </g>
  
  <g transform="translate(460,200)">
    <rect width="400" height="55" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="16" y="22" font-family="system-ui" font-size="12" font-weight="600" fill="#333">Phonemizer (G2P)</text>
    <text x="16" y="40" font-family="system-ui" font-size="10" fill="#888">eSpeak NG · EN↔AR auto-switch</text>
  </g>
  
  <!-- Arrow -->
  <path d="M450 255 L450 275" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,272 450,280 454,272" fill="#ccc"/>
  
  <!-- Row 3: Prompt Template (Simplified) -->
  <g transform="translate(40,290)">
    <rect width="820" height="70" rx="8" fill="#1e1e1e" filter="url(#s)"/>
    <text x="16" y="20" font-family="system-ui" font-size="11" font-weight="600" fill="#fff">Prompt Template</text>
    <text x="140" y="20" font-family="system-ui" font-size="10" fill="#888">8 delimiters · structured format</text>
    <text x="16" y="42" font-family="monospace" font-size="9" fill="#22c55e">[REF_SPEECH]</text>
    <text x="110" y="42" font-family="monospace" font-size="9" fill="#888">+ </text>
    <text x="120" y="42" font-family="monospace" font-size="9" fill="#3b82f6">[REF_TEXT]</text>
    <text x="200" y="42" font-family="monospace" font-size="9" fill="#888">+ </text>
    <text x="210" y="42" font-family="monospace" font-size="9" fill="#f59e0b">[TARGET_TEXT]</text>
    <text x="320" y="42" font-family="monospace" font-size="9" fill="#888">→</text>
    <text x="335" y="42" font-family="monospace" font-size="9" fill="#a855f7">[TARGET_CODES]</text>
    <text x="16" y="58" font-family="monospace" font-size="9" fill="#666">Unified vocab: 8192 speech codes + text tokens + delimiters</text>
  </g>
  
  <!-- Arrow -->
  <path d="M450 360 L450 380" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,377 450,385 454,377" fill="#ccc"/>
  
  <!-- Row 4: LLM -->
  <g transform="translate(40,395)">
    <rect width="820" height="60" rx="8" fill="#fff" filter="url(#s)"/>
    <rect width="820" height="26" rx="8" fill="linear-gradient(90deg,#3b82f6,#8b5cf6)"/>
    <rect width="820" height="26" rx="8" fill="#6366f1"/>
    <text x="16" y="18" font-family="system-ui" font-size="11" font-weight="600" fill="#fff">TRANSFORMER LLM</text>
    <text x="780" y="18" font-family="system-ui" font-size="10" fill="rgba(255,255,255,0.8)" text-anchor="end">Qwen 0.5B · GGUF Q8_0</text>
    <text x="16" y="46" font-family="system-ui" font-size="10" fill="#666">24 layers · GQA · 8192 context · top_k=40 · top_p=0.95 · temp=0.3</text>
  </g>
  
  <!-- Arrow -->
  <path d="M450 455 L450 475" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,472 450,480 454,472" fill="#ccc"/>
  
  <!-- Row 5: Output -->
  <g transform="translate(40,490)">
    <rect width="260" height="50" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="16" y="22" font-family="system-ui" font-size="11" font-weight="600" fill="#333">Token Extract</text>
    <text x="16" y="38" font-family="monospace" font-size="9" fill="#888">&lt;speech_X&gt; → int</text>
  </g>
  
  <g transform="translate(320,490)">
    <rect width="260" height="50" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="16" y="22" font-family="system-ui" font-size="11" font-weight="600" fill="#333">Codec Decoder</text>
    <text x="16" y="38" font-family="system-ui" font-size="9" fill="#888">codes → 24kHz waveform</text>
  </g>
  
  <g transform="translate(600,490)">
    <rect width="260" height="50" rx="8" fill="#ef4444" filter="url(#s)"/>
    <text x="16" y="22" font-family="system-ui" font-size="11" font-weight="600" fill="#fff">AUDIO OUTPUT</text>
    <text x="16" y="38" font-family="system-ui" font-size="9" fill="rgba(255,255,255,0.9)">24kHz · 16-bit · Mono</text>
  </g>
  
  <!-- Arrows between outputs -->
  <path d="M300 515 L320 515 M580 515 L600 515" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="317,511 325,515 317,519" fill="#ccc"/>
  <polygon points="597,511 605,515 597,519" fill="#ccc"/>
  
  <!-- Metrics bar -->
  <g transform="translate(40,560)">
    <rect width="820" height="32" rx="6" fill="#f0f0f0"/>
    <text x="70" y="21" text-anchor="middle" font-family="system-ui" font-size="10" fill="#333">RTF 0.46x</text>
    <text x="200" y="21" text-anchor="middle" font-family="system-ui" font-size="10" fill="#333">500ms latency</text>
    <text x="340" y="21" text-anchor="middle" font-family="system-ui" font-size="10" fill="#333">50 codes/sec</text>
    <text x="480" y="21" text-anchor="middle" font-family="system-ui" font-size="10" fill="#333">24kHz output</text>
    <text x="620" y="21" text-anchor="middle" font-family="system-ui" font-size="10" fill="#333">Streaming</text>
    <text x="750" y="21" text-anchor="middle" font-family="system-ui" font-size="10" fill="#333">EN/AR</text>
  </g>
  
  <!-- ===== VOICE CLONING DIAGRAM ===== -->
  <line x1="40" y1="620" x2="860" y2="620" stroke="#e0e0e0" stroke-width="1"/>
  
  <text x="450" y="660" text-anchor="middle" font-family="system-ui,sans-serif" font-size="20" font-weight="600" fill="#111">Zero-Shot Voice Cloning</text>
  <text x="450" y="680" text-anchor="middle" font-family="system-ui,sans-serif" font-size="11" fill="#666">Clone any voice with 3 seconds — no fine-tuning</text>
  
  <!-- Step 1 -->
  <g transform="translate(40,705)">
    <circle cx="16" cy="16" r="16" fill="#22c55e"/>
    <text x="16" y="21" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#fff">1</text>
    <rect x="45" y="0" width="360" height="55" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="60" y="20" font-family="system-ui" font-size="12" font-weight="600" fill="#333">Reference Audio Encoding</text>
    <text x="60" y="40" font-family="system-ui" font-size="10" fill="#888">audio.wav → Codec → [127, 4521, 892...]</text>
  </g>
  
  <!-- Step 2 -->
  <g transform="translate(455,705)">
    <circle cx="16" cy="16" r="16" fill="#3b82f6"/>
    <text x="16" y="21" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#fff">2</text>
    <rect x="45" y="0" width="360" height="55" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="60" y="20" font-family="system-ui" font-size="12" font-weight="600" fill="#333">Speaker Profile Cache</text>
    <text x="60" y="40" font-family="system-ui" font-size="10" fill="#888">MD5-based cache for instant reuse</text>
  </g>
  
  <!-- Arrow -->
  <path d="M450 780 L450 800" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,797 450,805 454,797" fill="#ccc"/>
  
  <!-- Step 3 -->
  <g transform="translate(40,815)">
    <circle cx="16" cy="16" r="16" fill="#f59e0b"/>
    <text x="16" y="21" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#fff">3</text>
    <rect x="45" y="0" width="770" height="60" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="60" y="20" font-family="system-ui" font-size="12" font-weight="600" fill="#333">Target Text with Code-Switching</text>
    <rect x="60" y="30" width="740" height="22" rx="4" fill="#1e1e1e"/>
    <text x="75" y="45" font-family="monospace" font-size="10" fill="#f59e0b">"Welcome مرحبا بكم to Audar AI demonstration تجربة"</text>
  </g>
  
  <!-- Arrow -->
  <path d="M450 875 L450 895" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,892 450,900 454,892" fill="#ccc"/>
  
  <!-- Step 4 -->
  <g transform="translate(40,910)">
    <circle cx="16" cy="16" r="16" fill="#8b5cf6"/>
    <text x="16" y="21" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#fff">4</text>
    <rect x="45" y="0" width="770" height="50" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="60" y="20" font-family="system-ui" font-size="12" font-weight="600" fill="#333">In-Context Voice Cloning</text>
    <text x="60" y="38" font-family="system-ui" font-size="10" fill="#888">LLM learns voice from ref_codes in prompt → generates target_codes in same style</text>
  </g>
  
  <!-- Arrow -->
  <path d="M450 960 L450 980" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="446,977 450,985 454,977" fill="#ccc"/>
  
  <!-- Step 5 -->
  <g transform="translate(40,995)">
    <circle cx="16" cy="16" r="16" fill="#ef4444"/>
    <text x="16" y="21" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#fff">5</text>
    <rect x="45" y="0" width="360" height="50" rx="8" fill="#fff" filter="url(#s)"/>
    <text x="60" y="20" font-family="system-ui" font-size="12" font-weight="600" fill="#333">Audio Synthesis</text>
    <text x="60" y="38" font-family="system-ui" font-size="10" fill="#888">Codec decode → 24kHz waveform</text>
  </g>
  
  <g transform="translate(455,995)">
    <rect x="45" y="0" width="360" height="50" rx="8" fill="none" stroke="#ef4444" stroke-width="2"/>
    <text x="225" y="22" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#ef4444">Cloned Voice Output</text>
    <text x="225" y="40" text-anchor="middle" font-family="system-ui" font-size="10" fill="#888">Target text in reference voice</text>
  </g>
  
  <!-- Arrow between step 5 boxes -->
  <path d="M405 1020 L455 1020" stroke="#ccc" stroke-width="1.5"/>
  <polygon points="452,1016 460,1020 452,1024" fill="#ccc"/>
  
  <!-- Footer -->
  <g transform="translate(40,1065)">
    <rect width="820" height="25" rx="4" fill="#f5f5f5"/>
    <text x="410" y="17" text-anchor="middle" font-family="system-ui" font-size="9" fill="#888">Training: LR 1e-5 · 140k steps · bf16 · Label masking on target_codes only · 100% cross-text conditioning</text>
  </g>
  
</svg>